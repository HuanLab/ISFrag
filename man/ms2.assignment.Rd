\name{ms2.assignment}
\alias{ms2.assignment}
%- Also NEED an '\alias' for EACH other topic documented here.
\title{
Assigns MS2 to corresponding features
}
\description{
Extracts and assigns MS2 spectra from DDA to features generated from Full-scan, DIA, or DDA samples. If both XCMS and custom feature tables are provided, performs merging and dereplication prior to assigning MS2 spectra.
}
\usage{
ms2.assignment(MS2directory, XCMSFT = NA, customFT = NA, ...)
}
%- maybe also 'usage' for other objects documented here.
\arguments{
  \item{MS2directory}{
Directory of folder containing all .mzXML files containing MS2 scans. This folder must contain only relevant .mzXML files of DDA sample(s).
}
  \item{XCMSFT}{
Optional featureTable generated by the XCMS.featuretable() function containing all features extracted from Full-scan, DIA, or DDA samples.
}
  \item{customFT}{
Optional featureTable generated by the custom.featuretable() function containing all features extracted from Full-scan, DIA, or DDA samples.
}
  \item{rt.tol}{
Retention time tolerance (seconds) used in feature merging and MS2 assignment to feature table.
}
  \item{mz.tol}{
Mass tolerance tolerance (Da) used in feature merging and MS2 assignment to feature table.
}
}
\details{
%%  ~~ If necessary, more details than the description above ~~
}
\value{
Returns a feature table with additional columns containing MS2 fragment m/z and intensity information for each feature.
}
\references{
%% ~put references to the literature/web site here ~
}
\author{
Sam Shen, Jian Guo, Tao Huan
}
\note{
%%  ~~further notes~~
}

%% ~Make other sections like Warning with \section{Warning }{....} ~

\seealso{
%% ~~objects to See Also as \code{\link{help}}, ~~~
}
\examples{
library(ISFrag)
MS1directory <- "X:/ISFtest20210127/HILIC(+)/HILIC(+)3/fullscan"
MS2directory <- "X:/ISFtest20210127/HILIC(+)/HILIC(+)3/DDA"
type <- "single"
ft_directory <- "X:/ISFtest20210127/HILIC(+)/HILIC(+)3/fullscan"
ft_name <- "HILIC(+)featuretable.csv"

# XCMS feature table
xcmsFT <- XCMS.featuretable(MS1directory = MS1directory, type = type, ppm=10, peakwidth=c(10,120),
    mzdiff = 0.01, snthresh = 6, integrate = 1, prefilter = c(3,100), noise = 100, bw = 5, mzwid = 0.015,
    max = 100, CAMERA = F)
featureTable <- ms2.assignment(MS2directory = MS2directory, XCMSFT = xcmsFT)

# custom feature table
customFT <- custom.featuretable(ft_directory = ft_directory, ft_name = ft_name)
featureTable <- ms2.assignment(MS2directory = MS2directory, customFT = customFT)

# Combination of XCMS and user-provided custom feature table
xcmsFT <- XCMS.featuretable(MS1directory = MS1directory, type = type, ppm=10, peakwidth=c(10,120),
    mzdiff = 0.01, snthresh = 6, integrate = 1, prefilter = c(3,100), noise = 100, bw = 5, mzwid = 0.015,
    max = 100, CAMERA = F)
customFT <- custom.featuretable(ft_directory = ft_directory, ft_name = ft_name)
featureTable <- ms2.assignment(MS2directory = MS2directory, XCMSFT = xcmsFT, customFT = customFT)
}
% Add one or more standard keywords, see file 'KEYWORDS' in the
% R documentation directory (show via RShowDoc("KEYWORDS")):
% \keyword{ ~kwd1 }
% \keyword{ ~kwd2 }
% Use only one keyword per line.
% For non-standard keywords, use \concept instead of \keyword:
% \concept{ ~cpt1 }
% \concept{ ~cpt2 }
% Use only one concept per line.
